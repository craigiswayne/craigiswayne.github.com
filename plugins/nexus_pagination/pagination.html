<html>

<head>

<link rel="stylesheet" href="../../css/fonts/font-awesome-4.1.0/css/font-awesome.css" />

<style>
	div.pagination *:not(.fa) {
		font-family:"Lucida Grande";
		font-size:11px;
	}
	
	div.pagination>header,
	div.pagination>footer{
		border:1px solid black;
		display:inline-block;
		width:100%;
	}
	
	div.pagination>header{
		position:relative;
		z-index:1;
	}

	div.pagination>header .dropdown{
		text-align:left;
		position:relative;
		padding-right:22px;
	}
	
	div.pagination>header .dropdown:before{
		position:absolute;
		right:10px;
	}
	
	div.pagination>header .dropdown>ul{
		display:none;
		position:absolute;
		margin:0px;
		list-style-type:none;
		padding:0px;
		left:0px;
		background-color:rgb(0,175,240);
	}
	
	div.pagination>header .dropdown>ul>li:hover{
		background-color:rgba(0,0,0,0.2);
	}
	
	div.pagination>header .dropdown:focus>ul{
		display:block;
	}
	
	div.pagination .interact{
		cursor:pointer;
		
		display:inline-block;
		vertical-align:bottom;
		
		border:none;
		min-width:45px;
		padding:0px 10px;
		
		box-sizing:border-box;
		-moz-box-sizing:border-box;
		
		height:45px;
		line-height:45px;
		margin:0px;
		background-color:rgb(0,175,240);
		
		color:white;
		font-weight:bold;
		font-size:11px;
		transition: transform 0.1s ease;
		user-select:none;
		-webkit-user-select:none;
	}
	
	div.pagination .interact:focus{
		outline:none;
	}
	
	div.pagination .interact:not(:last-child){
		border-right:1px solid white;
	}
	
	div.pagination .interact.fa:not(.dropdown){
		text-align:center;
	}
	
	div.pagination>header>section{
		float:right;
	}
	
	div.pagination>header>span.scope{
		height:45px;
		line-height:45px;
		font-weight:bold;
	}
	
	div.pagination>header>span.scope:before{
		content:"Showing ";
	}
	
	div.pagination>header>span.scope:after{
		content:" results";
	}
	
	div.pagination>div.results_area{
		margin:10px 0px;
	}
	
	div.pagination>div.results_area>[data-result_num]{
		transition:-webkit-transform 0.3s ease;
		-ms-transition:-webkit-transform 0.3s ease;
		-moz-transition:-webkit-transform 0.3s ease;
		-webkit-transition:-webkit-transform 0.3s ease;
	}
	
	div.pagination>div.results_area>[data-result_num][data-showing="false"]{
		transform:scale(0);
		-ms-transform:scale(0);
		-mos-transform:scale(0);
		-webkit-transform:scale(0);
		opacity:0;
		position:absolute;
		z-index:-1;
	}
	
	div.pagination>footer{
		position:relative;
	}

	div.pagination>footer>.interact{
		
		border:none;
		
		/*use the same styles generated by the button for this*/
		text-align:center;
	}
	
	div.pagination>footer>label.interact{
		counter-increment:decimal_no_period;
	}
	
	div.pagination>footer>button.interact:focus{
		outline:none;
	}
	
	div.pagination input[type=radio]:checked + label.interact,
	div.pagination .interact:hover{
		background-color:rgb(0, 158, 223);
		-webkit-transform:scale(1.1);
		border-left:1px solid white;
		z-index:1;
	}
	
	div.pagination>footer>label.interact:before{
		content:counter(decimal_no_period);
	}
	
	div.pagination>header input[type=radio],
	div.pagination>footer>input[type=radio]{
		display:none;
	}
	
	.ajax_preloader{
			background-image:url('data:image/svg+xml;base64,PHN2ZyBpZD0ibG9hZGluZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iIzAwYWZmMCI+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoMCAxNiAxNikiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89Ii4xIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAiLz4KICA8L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgMTYgMTYpIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIuMSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjEyNXMiLz4KICA8L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoOTAgMTYgMTYpIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIuMSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjI1cyIvPgogIDwvcGF0aD4KICA8cGF0aCBvcGFjaXR5PSIuMSIgZD0iTTE0IDAgSDE4IFY4IEgxNCB6IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgMTYgMTYpIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIuMSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjM3NXMiLz4KICA8L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoMTgwIDE2IDE2KSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iLjEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC41cyIvPgogIDwvcGF0aD4KICA8cGF0aCBvcGFjaXR5PSIuMSIgZD0iTTE0IDAgSDE4IFY4IEgxNCB6IiB0cmFuc2Zvcm09InJvdGF0ZSgyMjUgMTYgMTYpIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIuMSIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjY3NXMiLz4KICA8L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDE2IDE2KSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iLjEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC43NXMiLz4KICA8L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iLjEiIGQ9Ik0xNCAwIEgxOCBWOCBIMTQgeiIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1IDE2IDE2KSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iLjEiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC44NzVzIi8+CiAgPC9wYXRoPgo8L3N2Zz4K') !important;
			background-size:contain;
			background-repeat: no-repeat;
			background-position: center;
			display: block !important;
			margin: auto;
			width:100%;
			height:100%;
			min-width:20px;
			min-height:20px;
			text-align: center;
	}

</style>

<script>
	
	HTMLDivElement.prototype.paginate = function(){
	
		this.go_to_page = function(page_number){
			
			page_number = (page_number > this.total_pages) ? this.total_pages : page_number;
			page_number = (page_number < 1) ? 1 : page_number;

			this.page = page_number || 1;
			
			this.footer.querySelector("input[type=radio]:nth-of-type("+this.page+")").checked = "checked";
			
			this.scope_start	= ((this.page-1)*this.results_per_page)+1;
			this.scope_end 		= this.scope_start+this.results_per_page-1;
			this.querySelector("header>span.scope").innerHTML = this.scope_start + "-" + this.scope_end;

			var missing_results = new Array();
			for(var i=this.scope_start; i<this.scope_end+1; i++){
				missing_results.push(i);
			}
			
			for(var i=0; i<this.results.length; i++){
				
				var index = missing_results.indexOf(this.results[i].result_num);
				
				if(index != -1){
					missing_results.splice(index,1);
					this.results[i].element.dataset.showing = "true";
				}
				else{
					this.results[i].element.dataset.showing = "false";
				}
				
			}
			
			console.debug(missing_results);
			if(missing_results.length > 0){
				//var ajax_preloader = this.results_area.appendChild(document.createElement("div"));
				//ajax_preloader.className = "ajax_preloader";
			}
			
		};
		
		this.create_header = function(){
			
			this.header = this.header || this.querySelector("header") || this.insertBefore(document.createElement("header"),this.results_area);
			
			var interact_section = this.header.appendChild(document.createElement("section"));
			
			this.scope_title = this.header.appendChild(document.createElement("span"));
			this.scope_title.className 						= "scope";
			this.scope_title.innerText						= "1-"+this.results_per_page;
			
			this.results_per_page_dropdown_title 			= interact_section.appendChild(document.createElement("label"));
			this.results_per_page_dropdown_title.innerText 	= this.results_per_page + " Per Page";
			this.results_per_page_dropdown_title.className  = "interact dropdown fa fa-sort";
			
			this.sort_results_dropdown_title 			= interact_section.appendChild(document.createElement("button"));
			this.sort_results_dropdown_title.innerText 	= "Sort By";
			this.sort_results_dropdown_title.className  = "interact dropdown fa fa-sort";
			this.sort_results_dropdown_title.innerHTML += "<ul><li>when youre</li><li>what is up</li><li>what is up</li><li>what is up</li><li>what is up</li><li>what is up</li></ul>";
			
			var radio_view_name							= this.id + "_view";
			var list_view_radio							= interact_section.appendChild(document.createElement("input"));
			list_view_radio.type 						= "radio";
			list_view_radio.name						= radio_view_name;
			list_view_radio.id							= list_view_radio.name+"_list";
			list_view_radio.checked						= "checked";
			var list_view_label							= interact_section.appendChild(document.createElement("label"));
			list_view_label.className					= "interact fa fa-list-ul";
			list_view_label.setAttribute("for",list_view_radio.id);
			
			var grid_view_radio							= interact_section.appendChild(document.createElement("input"));
			grid_view_radio.type 						= "radio";
			grid_view_radio.name						= radio_view_name;
			grid_view_radio.id							= grid_view_radio+"_list";
			var grid_view_label							= interact_section.appendChild(document.createElement("label"));
			grid_view_label.className					= "interact fa fa-th-large";
			grid_view_label.setAttribute("for",grid_view_radio.id);

		}
		
		this.create_footer = function(){
		
			var pagination_container = this;
			
			this.footer = this.querySelector("footer") || this.appendChild(document.createElement("footer"));
			
			var pager_class = "interact";
			
			if(this.total_pages > 2){
				var go_to_first_page = this.footer.appendChild(document.createElement("button"));
				go_to_first_page.className = pager_class+" fa fa-angle-double-left";
				go_to_first_page.addEventListener("click",function(){pagination_container.go_to_page(1);},false);
			}
			
			if(this.total_pages > 1){
				var previous_page = this.footer.appendChild(document.createElement("button"));
				previous_page.className = pager_class+" fa fa-angle-left";
				previous_page.addEventListener("click",function(){pagination_container.go_to_page(pagination_container.page-1);},false);
			}
			
			for(var i=0; i<this.total_pages; i++){
				
				var pager_radio		= this.footer.appendChild(document.createElement("input"));
				pager_radio.type    = "radio";
				pager_radio.name 	= this.id + "_pager";
				pager_radio.value	= (i+1);
				pager_radio.id		= pager_radio.name+"_"+pager_radio.value;
				pager_radio.addEventListener("change",function(){pagination_container.go_to_page(this.value);},false);
				
				var pager       = this.footer.appendChild(document.createElement("label"));
				pager.className = pager_class;
				pager.setAttribute("for",pager_radio.id);
			}
			
			
			if(this.total_pages > 1){
				var next_page = this.footer.appendChild(document.createElement("button"));
				next_page.className = pager_class+" fa fa-angle-right";
				next_page.addEventListener("click",function(){pagination_container.go_to_page(pagination_container.page+1);},false);
			}
			
			if(this.total_pages > 2){
				var go_to_last_page = this.footer.appendChild(document.createElement("button"));
				go_to_last_page.className = pager_class+" fa fa-angle-double-right";
				go_to_last_page.addEventListener("click",function(){pagination_container.go_to_page(pagination_container.total_pages);},false);
			}
		};
		
		this.capture_results = function(){
			
			this.results = new Array();
			
			var valid_results = this.results_area.querySelectorAll("[data-result_num]");
			
			for(var i=0; i<valid_results.length; i++){
				var result = new Object();
				result.element = valid_results[i];
				result.result_num = parseInt(valid_results[i].dataset.result_num);
				this.results.push(result);
			}
			
		};
		
		this.order = function(){
			
			this.results.sort(function(a,b){
				return a.result_num - b.result_num;
			});
						
			for(var i=0; i<this.results.length; i++){
				this.results_area.removeChild(this.results[i].element);
			}
						
			for(var i=0; i<this.results.length; i++){
				this.results_area.appendChild(this.results[i].element);
			}
		};
		
		this.initialize = function(){
			
			this.id						= this.id || "pagination_"+Math.ceil((Math.random()*100));
			this.className 		   	   += (this.className.indexOf("pagination") == -1) ? " pagination" : "";
			
			var initial_results			= this.innerHTML;
			this.innerHTML = "";
			this.results_area 			= this.appendChild(document.createElement("div"));
			this.results_area.className	= "results_area";
			this.results_area.innerHTML = initial_results;
			
			this.capture_results();
			this.order();
			this.results_per_page		= parseInt(this.dataset.results_per_page) || this.results.length || 10;
			
			this.total_results			= this.dataset.total_results;
			this.sql_id					= this.dataset.sql_id;
			this.total_pages			= Math.ceil(this.total_results / this.results_per_page);
			this.page					= 1;
			
			
			
			this.create_header();
			this.create_footer();
			this.go_to_page(1);
		}
		
		this.initialize();
	};
	
	document.addEventListener("DOMContentLoaded",function(){
		for(var pagination_areas = document.querySelectorAll("div.pagination:not([data-total_results='']):not([data_sql_id=''])"), i=0; i<pagination_areas.length; i++){pagination_areas[i].paginate();}
	},false);
</script>

</head>

<body>

<div class="pagination" data-total_results="53" data-sql_id="3" data-results_per_page=7>
	<p data-result_num=1>first</p>
	<p data-result_num=4>fourth</p>
	<p data-result_num=3>third</p>
	<p data-result_num=2>second</p>
	<p data-result_num=5>fifth</p>
	<p data-result_num=6>sixth</p>
	<p data-result_num=8>eighth</p>
	<p data-result_num=9>ninth</p>
	<p data-result_num=7>seventh</p>
	<p data-result_num=10>tenth</p>
</div>


<span>to do</span>
<ol>
<li>mouse down on the next and previous buttons</li>
<li>ability to show all</li>
<li>working mask</li>
<li>what happens when the initial results are not in order</li>
<li>changing of pages bug</li>
</ol>

<style>
.results_area>*{
height:100px;
width:100px;
display:inline-block;
background-color:lime;
margin:5px;
}
</style>

</body>

</html>
