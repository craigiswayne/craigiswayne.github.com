(function(b){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);(function(b){var a=b.fn.attr;b.fn.attr=function(){var c,e,d,f;if(this[0]&&arguments.length===0){f={};d=this[0].attributes;e=d.length;for(c=0;c<e;c++){f[d[c].name.toLowerCase()]=d[c].value}return f}else{return a.apply(this,arguments)}}}(jQuery));var nexus={parse_template:function(d,e){d=d||"";e=e||{};var c=/\(#(.*?)#\)/g;var f=d;var a;while((a=c.exec(f))!==null){if(a.index===c.lastIndex){c.lastIndex++}var b=a[0].replace("(#","").replace("#)","");if(e[b]){d=d.replace(a[0],e[b].toString())}else{d=d.replace(a[0],"")}}return d}};function twentyfour_gallery(a,b){this.container=null;this.html=null;this.interval=null;this.tray=null;this.tray_slider=null;this.tray_nav_right=null;this.tray_nav_left=null;this.stage=null;this.slide_index=0;this.slides=[];this.buttons={};this.unveil_script='!function(t){t.fn.unveil=function(i,e){function n(){var i=a.filter(function(){var i=t(this);if(!i.is(":hidden")){var e=o.scrollTop(),n=e+o.height(),r=i.offset().top,s=r+i.height();return s>=e-u&&n+u>=r}});r=i.trigger("unveil"),a=a.not(r)}var r,o=t(window),u=i||0,s=window.devicePixelRatio>1,l=s?"data-src-retina":"data-src",a=this;return this.one("unveil",function(){var t=this.getAttribute(l);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof e&&e.call(this))}),o.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery||window.Zepto);';this.settings={prefix:"twentyfour_gallery_",css:"",id:null,tray_default_state:"show_tray",container_class:"twentyfour gallery",fullscreen_icon_class:"icon-expand",play_icon_class:"icon-playback-play",pause_icon_class:"icon-playback-pause",nav_left_icon_class:"icon-angle-left",nav_right_icon_class:"icon-angle-right",thumbnail_selector:">img",toggle_tray_icon_class:"icon-th",show_speed:3000,autolink_css:true,minimum_slides:2,fullsize_image_attribute:"data-imageurl",unveil_delay:2000,enable_single_image_lightbox:true,templates:{gallery:'<div id="(#id#)" (#attributes#)>(#stage#)(#tray#)(#media_bar#)</div>',stage:'<div class="stage"><div class="fullscreen toggler icon (#fullscreen_icon_class#)"></div><div class="action_area nav left"> <div class="icon left (#nav_left_icon_class#)"></div></div><div class="slider">(#slides#)</div><div class="action_area nav right"><div class="icon right (#nav_right_icon_class#)"></div></div></div>',slide:'<div class="slide"><div class="aligner">(#slide_content#)</div></div>',tray:'<div class="tray"><div class="action_area nav left"> <div class="icon (#nav_left_icon_class#)"></div></div><div class="slider">(#thumbnails#)</div><div class="action_area nav right"><div class="icon (#nav_right_icon_class#)"></div></div></div>',media_bar:'<div class="media_bar"><div class="play_pause_toggle toggler button"><span class="icon play (#play_icon_class#)"></span><span class="icon pause (#pause_icon_class#)"></span></div><div class="status">(#slide_index_options#)&nbsp;/&nbsp;<span class="total">(#total_slides#)</span></div><div class="tray_toggle toggler button icon (#toggle_tray_icon_class#)"></div></div>'}};this.go_fullscreen=function(){var c=this.container[0];if(c.requestFullscreen){c.requestFullscreen()}else{if(c.mozRequestFullScreen){c.mozRequestFullScreen()}else{if(c.webkitRequestFullscreen){c.webkitRequestFullscreen()}else{if(c.msRequestFullscreen){c.msRequestFullscreen()}}}}this.container.addClass("fullscreen");$("html").addClass(this.settings.prefix+"fullscreen")};this.exit_fullscreen=function(){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}this.container.removeClass("fullscreen");$("html").removeClass(this.settings.prefix+"fullscreen")};this.toggle_fullscreen=function(e){var c,d;c=this.container;if(this.container.hasClass("fullscreen")){this.exit_fullscreen()}else{this.go_fullscreen()}};this.go_to_slide=function(j){var n=this;if(j<0){j=this.slides.length-1;$(this.container).addClass("last")}else{$(this.container).removeClass("last")}if(j>this.slides.length-1){j=0;$(this.container).addClass("first")}else{$(this.container).removeClass("first")}this.slide_index=j;$(this.stage).find(">.slider").css("margin-left",(-(j*100))+"%");$(this.tray_slider).find(".slide").each(function(o){$(this).removeClass("active")});if(this.total_slides>this.minimum_slides){$(this.media_bar).find(".current_slide").text(this.slide_index+1)}else{$(this.media_bar).find("select.current_slide option").each(function(o){if(o==n.slide_index){$(this).attr("selected","selected")}else{$(this).removeAttr("selected")}})}var m=$(this.tray_slider).find(".slide")[this.slide_index];$(m).addClass("active");var f=parseInt($(this.tray).width());var l=$(this.tray).offset().left;var k=l+f;var h=$(m).offset().left;var g=h+$(m).outerWidth();var e=0;if(g>k){var c=parseInt($(this.tray_nav_right).width());e=g-k-c}else{if(h<l){var i=parseInt($(this.tray_nav_left).width());e=h-l-i}else{}}var d=parseInt($(this.tray_slider).css("margin-left"));$(this.tray_slider).css("margin-left",d-e);return this.slide_index};this.toggle_show=function(){$(this.container).toggleClass("playing");if($(this.container).hasClass("playing")){this.play()}else{this.pause()}};this.toggle_tray=function(){$(this.container).toggleClass("show_tray")};this.play=function(){var c=this;this.interval=setInterval(function(){c.go_to_slide(c.slide_index+1)},this.settings.show_speed)};this.pause=function(){clearInterval(this.interval)};this.add_event_listeners=function(){var c=this;$(this.tray).find(".slide").each(function(d){$(this).click(function(e){c.go_to_slide(d)})});$(this.media_bar).find(".play_pause_toggle").click(function(){c.toggle_show()});$(this.media_bar).find(".tray_toggle").click(function(){c.toggle_tray()});$(this.media_bar).find("select.current_slide").change(function(){c.go_to_slide($(this).val())});$(this.container).find(".action_area.nav.left").click(function(){c.go_to_slide(c.slide_index-1)});$(this.container).find(".action_area.nav.right").click(function(){c.go_to_slide(c.slide_index+1)});this.buttons.fullscreen.click(function(){c.toggle_fullscreen()});$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(g){var f=document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenEnabled||document.fullScreen;var d=f?"FullscreenOn":"FullscreenOff";if(document.msFullscreenEnabled&&document.msFullscreenElement==null){d="FullscreenOff"}if(d=="FullscreenOff"){c.exit_fullscreen()}})};this.generate_slides=function(){var d=this;var f="";for(var e=0;e<this.slides.length;e++){var c=$(this.slides[e]).clone();var g=$(c).find("img["+this.settings.fullsize_image_attribute+"]");$(g).each(function(){var h=$(this).clone();h.attr("src",$(this).attr(d.settings.fullsize_image_attribute));$(this).replaceWith(h)});c=$(c)[0].outerHTML;f+=c}return f};this.generate_thumbnails=function(){html="";for(var c=0;c<this.slides.length;c++){var d=$(this.slides[c]).find(this.settings.thumbnail_selector).clone();$(d).addClass("slide thumbnail");d=$(d)[0].outerHTML;html+=d}return html};this.generate_attributes=function(){var d="";this.attributes["class"]=this.attributes["class"]||"";this.attributes["class"]+=" "+this.settings.container_class;this.attributes["class"]+=" "+this.settings.tray_default_state;for(var c in this.attributes){d+=c+"='"+this.attributes[c]+"'"}return d};this.update_settings=function(c){$.extend(this.settings,c)};this.generate_gallery=function(){data=this.settings;data.slides=this.generate_slides();data.thumbnails=this.generate_thumbnails();data.total_slides=this.slides.length;data.attributes=this.generate_attributes();if(data.total_slides>this.settings.minimum_slides){data.slide_index_options="<select class='current_slide'>";for(var c=0;c<data.total_slides;c++){data.slide_index_options+="<option value='"+c+"'>"+(c+1)+"</option>"}data.slide_index_options+="</select>"}else{data.slide_index_options="<span class=current_slide>1</span>"}data.stage=nexus.parse_template(this.settings.templates.stage,data);data.tray=nexus.parse_template(this.settings.templates.tray,data);data.media_bar=nexus.parse_template(this.settings.templates.media_bar,data);return nexus.parse_template(this.settings.templates.gallery,data)};this.inject_js=function(c){return $("head").prepend('<script type="text/javascript" class="'+this.settings.prefix+' injected">'+c+"<\/script>")};this.inject_css=function(){return null;if($("style[class*='"+this.settings.prefix+"']").length==0&&$("link[class*='"+this.settings.prefix+"']").length==0){$("head").prepend('<style class="'+this.settings.prefix+'">'+this.settings.css+"</style>")}return this.settings.css};this.use_unveil=function(d){var c=this;this.inject_js(this.unveil_script);d.addClass("unveil mobile");d.find("img").each(function(){$(this).attr("data-src",$(this).attr(c.settings.fullsize_image_attribute));$(this).unveil(c.settings.unveil_delay)})};this.init=function(f,e){if($.browser.mobile){this.use_unveil(f);this.inject_css();return}gallery=this;this.container=f;this.attributes=this.container.attr();this.update_settings(e);this.update_settings(this.container.data());this.settings.id=this.container.attr("id")||this.settings.prefix+Math.round(Math.random()*100);var d=$(this.container).find(".slide");if(d.length<this.settings.minimum_slides){if(gallery.settings.enable_single_image_lightbox){var c=f.find("img").attr("src");f.wrap("<a data-lightbox='"+this.settings.id+"' href='"+c+"' ></a>")}return null}else{this.inject_css()}$(d).each(function(g){gallery.slides[g]=$(this)});this.container.replaceWith(this.generate_gallery());this.container=$("#"+this.settings.id);this.stage=$(this.container).find(">.stage");this.tray=$(this.container).find(">.tray");this.tray_nav_right=$(this.tray).find(">.nav.right");this.tray_nav_left=$(this.tray).find(">.nav.left");this.tray_slider=$(this.tray).find(">.slider");this.media_bar=$(this.container).find(">.media_bar");this.buttons.fullscreen=this.container.find(".icon.fullscreen");this.add_event_listeners();this.go_to_slide(0);this.container.addClass("ready");return this};return this.init(a,b)}$(document).ready(function(){$("[data-embed24=Images]").each(function(){new twentyfour_gallery($(this))});if(lightbox){if(lightbox.init){lightbox.init()}}});